# OPFS Explorer

OPFS Explorer æ˜¯ä¸€ä¸ªæµè§ˆå™¨æ’ä»¶ï¼Œç”¨äºç®¡ç†å’Œç¼–è¾‘ Origin Private File System (OPFS) ä¸­çš„æ–‡ä»¶ã€‚å®ƒæä¾›äº†ç›´è§‚çš„æ–‡ä»¶æ ‘ç•Œé¢å’Œå¼ºå¤§çš„ä»£ç ç¼–è¾‘å™¨ï¼Œè®©æ‚¨å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è½»æ¾ç®¡ç† OPFS æ–‡ä»¶ç³»ç»Ÿã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ“ æ–‡ä»¶ç®¡ç†

- **æ–‡ä»¶æ ‘æµè§ˆ**: ç›´è§‚çš„æ ‘å½¢ç»“æ„æ˜¾ç¤º OPFS ä¸­çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹
- **æ–‡ä»¶æ“ä½œ**: åˆ›å»ºã€åˆ é™¤ã€é‡å‘½åæ–‡ä»¶å’Œæ–‡ä»¶å¤¹
- **æ‹–æ‹½æ”¯æŒ**: æ”¯æŒæ‹–æ‹½æ“ä½œï¼ˆè®¡åˆ’ä¸­ï¼‰
- **æœç´¢åŠŸèƒ½**: å¿«é€Ÿæœç´¢æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼ˆè®¡åˆ’ä¸­ï¼‰

### âœï¸ ä»£ç ç¼–è¾‘

- **Monaco Editor**: åŸºäº VS Code çš„å¼ºå¤§ä»£ç ç¼–è¾‘å™¨
- **è¯­æ³•é«˜äº®**: æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•é«˜äº®
- **è‡ªåŠ¨ä¿å­˜**: ç¼–è¾‘å†…å®¹è‡ªåŠ¨ä¿å­˜åˆ° OPFS
- **æ–‡ä»¶ç±»å‹è¯†åˆ«**: æ ¹æ®æ–‡ä»¶æ‰©å±•åè‡ªåŠ¨è¯†åˆ«è¯­è¨€ç±»å‹

### ğŸ”§ é«˜çº§åŠŸèƒ½

- **OPFS é›†æˆ**: å®Œå…¨åŸºäºæµè§ˆå™¨åŸç”Ÿ OPFS API
- **å®æ—¶åŒæ­¥**: æ–‡ä»¶ä¿®æ”¹å®æ—¶åŒæ­¥åˆ° OPFS
- **å­˜å‚¨ç®¡ç†**: æŸ¥çœ‹å’Œç®¡ç† OPFS å­˜å‚¨ä½¿ç”¨æƒ…å†µ
- **ä¸»é¢˜æ”¯æŒ**: æ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢ï¼ˆè®¡åˆ’ä¸­ï¼‰

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: React 18 + TypeScript
- **UI ç»„ä»¶åº“**: Ant Design
- **ä»£ç ç¼–è¾‘å™¨**: Monaco Editor
- **æ„å»ºå·¥å…·**: Vite
- **æµè§ˆå™¨ API**: Origin Private File System (OPFS)

## æµè§ˆå™¨æ”¯æŒ

OPFS Explorer éœ€è¦æ”¯æŒä»¥ä¸‹ç°ä»£æµè§ˆå™¨ APIï¼š

- **Origin Private File System (OPFS)**: Chrome 86+, Edge 86+
- **File System Access API**: Chrome 86+, Edge 86+
- **Manifest V3**: Chrome 88+, Edge 88+

### æ”¯æŒçš„æµè§ˆå™¨ç‰ˆæœ¬

- âœ… Chrome 86+
- âœ… Edge 86+
- âŒ Firefox (æš‚ä¸æ”¯æŒ OPFS)
- âŒ Safari (æš‚ä¸æ”¯æŒ OPFS)

## å®‰è£…å’Œå¼€å‘

### ç¯å¢ƒè¦æ±‚

- Node.js 16+
- npm æˆ– yarn
- æ”¯æŒ OPFS çš„ç°ä»£æµè§ˆå™¨

### å¼€å‘ç¯å¢ƒè®¾ç½®

1. **å…‹éš†é¡¹ç›®**

   ```bash
   git clone <repository-url>
   cd packages/opfs-explorer
   ```

2. **å®‰è£…ä¾èµ–**

   ```bash
   npm install
   ```

3. **å¼€å‘æ¨¡å¼**

   ```bash
   npm run dev
   ```

4. **æ„å»ºæ’ä»¶**
   ```bash
   npm run build
   ```

### åœ¨æµè§ˆå™¨ä¸­åŠ è½½æ’ä»¶

1. æ‰“å¼€ Chrome æˆ– Edge æµè§ˆå™¨
2. è®¿é—® `chrome://extensions/` æˆ– `edge://extensions/`
3. å¯ç”¨"å¼€å‘è€…æ¨¡å¼"
4. ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
5. é€‰æ‹© `packages/opfs-explorer/dist` ç›®å½•

## é¡¹ç›®ç»“æ„

```
packages/opfs-explorer/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ file-tree.tsx   # æ–‡ä»¶æ ‘ç»„ä»¶
â”‚   â”‚   â””â”€â”€ editor.tsx      # ä»£ç ç¼–è¾‘å™¨ç»„ä»¶
â”‚   â”œâ”€â”€ contexts/           # React ä¸Šä¸‹æ–‡
â”‚   â”‚   â””â”€â”€ app-context.tsx # åº”ç”¨çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ services/           # æœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ opfs-service.ts # OPFS æœåŠ¡å®ç°
â”‚   â”œâ”€â”€ types/              # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ popup/              # æ’ä»¶å¼¹çª—
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â””â”€â”€ popup.tsx
â”‚   â”œâ”€â”€ background/         # åå°è„šæœ¬
â”‚   â”‚   â””â”€â”€ background.ts
â”‚   â””â”€â”€ content/            # å†…å®¹è„šæœ¬
â”‚       â””â”€â”€ content.ts
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”‚   â”œâ”€â”€ manifest.json       # æ’ä»¶æ¸…å•
â”‚   â””â”€â”€ icons/              # æ’ä»¶å›¾æ ‡
â”œâ”€â”€ dist/                   # æ„å»ºè¾“å‡º
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

## ä½¿ç”¨è¯´æ˜

### åŸºæœ¬æ“ä½œ

1. **æ‰“å¼€æ’ä»¶**: æ‰“å¼€å¼€å‘è€…å·¥å…· (F12)ï¼Œåœ¨é¢æ¿ä¸­æ‰¾åˆ° "OPFS Explorer" æ ‡ç­¾é¡µ
2. **æµè§ˆæ–‡ä»¶**: åœ¨å·¦ä¾§æ–‡ä»¶æ ‘ä¸­æµè§ˆ OPFS ä¸­çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹
3. **ç¼–è¾‘æ–‡ä»¶**: ç‚¹å‡»æ–‡ä»¶åœ¨å³ä¾§ç¼–è¾‘å™¨ä¸­æ‰“å¼€
4. **åˆ›å»ºæ–‡ä»¶**: ä½¿ç”¨æ–‡ä»¶æ ‘ä¸­çš„"æ–°å»º"æŒ‰é’®åˆ›å»ºæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹
5. **ä¿å­˜æ–‡ä»¶**: ç¼–è¾‘å†…å®¹ä¼šè‡ªåŠ¨ä¿å­˜åˆ° OPFS

### æ–‡ä»¶æ“ä½œ

- **åˆ›å»ºæ–‡ä»¶**: å³é”®ç‚¹å‡»æ–‡ä»¶å¤¹ â†’ æ–°å»ºæ–‡ä»¶
- **åˆ›å»ºæ–‡ä»¶å¤¹**: å³é”®ç‚¹å‡»æ–‡ä»¶å¤¹ â†’ æ–°å»ºæ–‡ä»¶å¤¹
- **åˆ é™¤æ–‡ä»¶**: å³é”®ç‚¹å‡»æ–‡ä»¶ â†’ åˆ é™¤
- **é‡å‘½å**: å³é”®ç‚¹å‡»æ–‡ä»¶ â†’ é‡å‘½åï¼ˆè®¡åˆ’ä¸­ï¼‰

### ç¼–è¾‘å™¨åŠŸèƒ½

- **è¯­æ³•é«˜äº®**: æ ¹æ®æ–‡ä»¶æ‰©å±•åè‡ªåŠ¨è¯†åˆ«è¯­è¨€
- **è‡ªåŠ¨ä¿å­˜**: ç¼–è¾‘å†…å®¹ä¼šåœ¨ 300ms åè‡ªåŠ¨ä¿å­˜
- **å¿«æ·é”®**: æ”¯æŒå¸¸è§çš„ç¼–è¾‘å™¨å¿«æ·é”®
- **ä¸»é¢˜**: é»˜è®¤ä½¿ç”¨æš—è‰²ä¸»é¢˜

## API å‚è€ƒ

### OPFS æœåŠ¡

```typescript
interface OPFSService {
  // æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
  readdir(path: string): Promise<string[]>;
  stat(path: string): Promise<FileSystemStats>;
  readFile(path: string): Promise<string>;
  writeFile(path: string, content: string): Promise<void>;
  mkdir(path: string, options?: { recursive?: boolean }): Promise<void>;
  unlink(path: string): Promise<void>;
  rmdir(path: string): Promise<void>;

  // é«˜çº§æ“ä½œ
  generateFileTree(): Promise<FileNode[]>;
  createFile(path: string, content?: string): Promise<void>;
  createFolder(path: string): Promise<void>;
  deleteFile(path: string): Promise<void>;
  deleteFolder(path: string): Promise<void>;
  emptyDirectory(path: string): Promise<void>;
}
```

### æ–‡ä»¶èŠ‚ç‚¹ç±»å‹

```typescript
interface FileNode {
  id: string;
  name: string;
  type: "file" | "folder";
  path: string;
  children?: FileNode[];
}
```

## å¼€å‘è®¡åˆ’

### å·²å®ŒæˆåŠŸèƒ½

- âœ… åŸºç¡€æ–‡ä»¶æ ‘æµè§ˆ
- âœ… æ–‡ä»¶åˆ›å»ºå’Œåˆ é™¤
- âœ… ä»£ç ç¼–è¾‘å™¨é›†æˆ
- âœ… OPFS API é›†æˆ
- âœ… è‡ªåŠ¨ä¿å­˜åŠŸèƒ½

### è®¡åˆ’ä¸­çš„åŠŸèƒ½

- ğŸ”„ æ–‡ä»¶é‡å‘½å
- ğŸ”„ æ‹–æ‹½æ–‡ä»¶æ“ä½œ
- ğŸ”„ æ–‡ä»¶æœç´¢
- ğŸ”„ ä¸»é¢˜åˆ‡æ¢
- ğŸ”„ æ–‡ä»¶å¯¼å…¥/å¯¼å‡º
- ğŸ”„ å¤šæ ‡ç­¾é¡µç¼–è¾‘
- ğŸ”„ æ–‡ä»¶å†å²ç‰ˆæœ¬
- ğŸ”„ æ’ä»¶è®¾ç½®é¡µé¢

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. æ‰“å¼€ Pull Request

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹å®‰å…¨å¼€å‘
- éµå¾ª ESLint å’Œ Prettier é…ç½®
- ç¼–å†™æ¸…æ™°çš„æ³¨é‡Šå’Œæ–‡æ¡£
- æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†

## è®¸å¯è¯

MIT License

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ Issue
- å‘é€é‚®ä»¶
- å‚ä¸è®¨è®º

---

**æ³¨æ„**: OPFS Explorer æ˜¯ä¸€ä¸ªå®éªŒæ€§é¡¹ç›®ï¼Œä¸»è¦ç”¨äºæ¼”ç¤ºå’Œå­¦ä¹  OPFS API çš„ä½¿ç”¨ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å‰ï¼Œè¯·ç¡®ä¿å……åˆ†æµ‹è¯•æ‰€æœ‰åŠŸèƒ½ã€‚
